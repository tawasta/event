<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>

        <!-- Add page for events -->
        <record id="view_partner_form_inherited" model="ir.ui.view">
            <field name="name">view.partner.form.inherited</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form" />
            <field name="arch" type="xml">

                <notebook position="inside">
                    <page string="Events">
                        <group string="Description">
                            <p>In the following "Event Sale Orders"-section all the sale orders concerning event registrations are presented. To create sale order for event go to Quotations > Create > Select customer > Add order line > Select "Event registration" as product > Select the event you want to register to and the ticket. After you have confirmed the sale, the registration appears under events. Under the "Event Sale Orders"-section there's "Event Registrations"-section that shows all the events partner has registered to.</p>
                        </group>
                        <group string="Event Sale Orders">
                            <field name="event_sale_orders" string="Event sale orders" nolabel="1" readonly="True">
                                <tree string='Event Sale Orders'>
                                    <field name='name'/>
                                    <field name='new_header'/>
                                    <field name='date_order'/>
                                    <field name='partner_id'/>
                                    <field name='user_id'/>
                                    <field name='amount_total'/>
                                    <field name='state'/> 
                                </tree>
                            </field>
                        </group>

                        <group string="Event Registrations">
                            <field name="registrations" string="Event registrations" nolabel="1" readonly="True">
                                <tree string="Registration" fonts="bold:message_unread==True">
                                    <field name="create_date"/>
                                    <field name="partner_id"/>
                                    <field name="name"/>
                                    <field name="email"/>
                                    <field name="event_id" />
                                    <field name="nb_register"/>
                                    <field name="user_id" invisible="1"/>
                                    <field name="new_origin"/>
                                    <field name="origin"/>
                                    <field name="state"/>
                                    <field name="message_unread" invisible="1"/>
                                    <button name="registration_open" string="Confirm Registration" states="draft" type="object" icon="gtk-apply"/>
                                    <button name="button_reg_close" string="Attended the Event" states="open" type="object" icon="gtk-jump-to"/>
                                    <button name="button_reg_cancel" string="Cancel Registration" states="draft,open" type="object" icon="gtk-cancel"/>
                                </tree>
                            </field>
                        </group>
                    </page>
                </notebook>        
            </field>
        </record>
    </data>
</openerp>

