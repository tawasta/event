<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <report
            id="report_event_track_reviewer"
            string="Track ratings reviewer summary"
            model="event.track"
            report_type="qweb-pdf"
            file="website_event_track_advanced.event_track_reviewer_report"
            name="website_event_track_advanced.event_track_reviewer_report"
            paperformat="event.paperformat_euro_lowmargin"
    />

    <template id="website_event_track_advanced.event_track_reviewer_report">

        <t t-call="report.html_container">
            <div class="page">
                <style type="text/css">
                    table {
                        border-collapse: collapse;
                    }
                    td {
                        border: 1px dotted #555;
                        padding: 2px 4px;
                    }
                </style>

                <div class="oe_structure"/>
                <h1>Event reviewers</h1>

                <table name="track_ratings_table" class="table table-condensed">
                    <thead>
                        <tr>
                            <th>Track id</th>
                            <th>Track title</th>
                            <th>Reviewer</th>
                            <th>Rating</th>
                        </tr>
                    </thead>

                    <tbody>
                        <t t-foreach="docs" t-as="doc">
                        <t t-set="doc" t-value="doc.with_context({'lang':doc.language.code or 'en_US'})"/>
                            <tr>
                                <td><span t-field="doc.id"/></td>
                                <td><span t-field="doc.name"/></td>
                                <td />
                                <td />
                            </tr>

                            <t t-foreach="doc.ratings" t-as="rating">
                                <tr>
                                    <td />
                                    <td />
                                    <td><span t-field="rating.create_uid"/></td>
                                    <td><span t-field="rating.rating"/></td>
                                </tr>
                            </t>
                        </t>
                    </tbody>
                </table>

            </div>
        </t>
    </template>

</odoo>