<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <report
            id="report_event_track_rating"
            string="Track ratings summary"
            model="event.track"
            report_type="qweb-pdf"
            file="website_event_track_advanced.event_track_rating_report"
            name="website_event_track_advanced.event_track_rating_report"
            paperformat="event.paperformat_euro_landscape"
    />

    <template id="website_event_track_advanced.event_track_rating_report">

        <t t-call="report.html_container">
            <div class="page">
                <style type="text/css">
                    table {
                        border-collapse: collapse;
                    }
                    td {
                        border: 1px dotted #555;
                        padding: 2px 4px;
                    }
                </style>

                <div class="oe_structure"/>
                <h1>Track ratings summary</h1>

                <table name="track_ratings_table" class="table table-condensed">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Track id</th>
                            <th>Track title</th>
                            <th>Contact organization, name</th>
                            <th>Avg</th>
                            <th>Ratings</th>
                        </tr>
                    </thead>

                    <tbody>
                        <t t-foreach="docs" t-as="doc">
                        <t t-set="doc" t-value="doc.with_context({'lang':doc.language.code or 'en_US'})"/>
                            <tr>
                                <td><span t-esc="str(doc_index+1) + '.'"/></td>
                                <td><span t-field="doc.id"/></td>
                                <td><span t-field="doc.name"/></td>
                                <td><span t-field="doc.partner_id"/></td>
                                <td><span t-field="doc.rating_avg"/></td>
                                <td>
                                    <t t-foreach="doc.ratings" t-as="rating">
                                        <t t-esc="rating.rating" /><t t-if="not rating_last">, </t>
                                    </t>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>

            </div>
        </t>
    </template>

</odoo>