<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Overwrites the proposal layout -->
    <template name="Event track proposal" id="website_event_track.event_track_proposal">
        <t t-call="website_event.layout">
            <script type="text/javascript" src="/website_event_track_advanced/static/src/js/proposal.js"></script>

            <div class="oe_structure"/>
            <div class="container">
                <section>
                    <h1 class="text-center mb0">Call for Papers</h1>
                    <h2 class="text-center text-muted mb32" t-esc="event.name"></h2>
                </section>
                <section id="forms" t-if="not event.show_track_proposal">
                    <h1>Proposals are closed!</h1>
                    <p>
                        This event does not accept proposals.
                    </p>
                </section>
                <section class="row">
                    <div class="col-md-12">
                        <div class="oe_structure">
                            <section>
                                <h3 class="page-header mt16">
                                    Introduction
                                </h3>
                                <p>
                                    We will accept a broad range of
                                    presentations, from reports on academic and
                                    commercial projects to tutorials and case
                                    studies. As long as the presentation is
                                    interesting and potentially useful to the
                                    audience, it will be considered for
                                    inclusion in the programme.
                                </p>
                            </section>
                            <section>
                                <h3 class="page-header">Application</h3>
                                <p class="alert alert-info alert-dismissable">
                                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                    Fill this form to propose your talk.
                                </p>
                            </section>
                        </div>
                        <section id="forms" t-if="event.show_track_proposal">
                            <form class="form-horizontal mt32 js_website_submit_form" t-attf-action="/event/#{event.id}/track_proposal/post" method="post" enctype="multipart/form-data">

                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                                <!-- Application info -->
                                <div class="panel panel-default" id="track-application-application-div">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Application info</h3>
                                    </div>

                                    <div class="panel-body">
                                        <p class="alert alert-info alert-dismissable">
                                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                            This is the part of your application that will be shown to the reviewers.
                                        </p>
                                        <p class="alert alert-warning alert-dismissable">
                                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                            Please refrain from using any identifying information (name, organization, project).<br/>
                                            Using identifying information in the application may be grounds for disqualification.
                                        </p>

                                        <div class="form-group" id="track-application-application-info-div">
                                            <div class="col-md-4">
                                                <label for="track_name" class="control-label">Application title</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-header"/></span>
                                                    <input name="track_name" placeholder="Application title" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <label for="track_name" class="control-label">Application as a video (link to e.g. Youtube or Vimeo)</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-video-camera"/></span>
                                                    <input name="video_url" placeholder="https://www.youtube.com, https://vimeo.com, ..." class="form-control" type="text" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-application-info-div">
                                            <div class="col-md-12">
                                                <label for="description" class="control-label">Application content</label>

                                                <textarea class="form-control" name="description" placeholder="Application content..." rows="16"/>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-application-attachment-div">
                                            <div class="col-md-8">
                                                <label for="attachment_ids" class="control-label">Attachment</label>
                                                <input name="attachment_ids" type="file" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- / Application info -->

                                <!-- Target group info -->
                                <div class="panel panel-default" id="track-application-targetgroup-div">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Target group info</h3>
                                    </div>

                                    <div class="panel-body">
                                        <p class="alert alert-info alert-dismissable">
                                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                            Please give information about your primary target audience.
                                        </p>

                                        <div class="form-group" id="track-application-targetgroup-info-div">
                                            <div class="col-md-4">
                                                <label for="target_group" class="control-label">Target group</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-bullseye"/></span>
                                                    <select name="target_group" class="form-control" type="selection">
                                                         <t t-foreach="target_groups" t-as="group">
                                                             <option t-attf-value="#{group.id}"><t t-esc="group.name"/></option>
                                                         </t>
                                                    </select>
                                                </div>

                                                <label for="language" class="control-label">Language</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-language"/></span>
                                                    <select name="language" class="form-control" type="selection">
                                                        <t t-foreach="languages" t-as="language">
                                                            <option t-attf-value="#{language.id}"><t t-esc="language.name"/></option>
                                                        </t>
                                                        <option t-attf-value="0">Any language</option>
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-md-8">
                                                <label for="target_group_info" class="control-label">Target group info</label>

                                                <textarea class="form-control" name="target_group_info" placeholder="Target group info..." rows="4"/>
                                            </div>
                                        </div>

                                        <div class="form-group" t-if="len(event.allowed_track_tag_ids)" id="track-application-targetgroup-tags-div">
                                            <div class="col-md-12">
                                                <label class="control-label">Tags</label>
                                                <p class="alert alert-info alert-dismissable mt8">
                                                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                                    You should select 2-4 tags that matches your presentation best.
                                                </p>
                                                <p class="alert alert-warning alert-dismissable mt8">
                                                    <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                                    Selecting too many tags can make it harder to find the correct audience.
                                                </p>

                                                <div class="row">
                                                    <label class="col-sm-4" t-foreach="event.allowed_track_tag_ids" t-as="tag">
                                                        <input type="checkbox" t-attf-name="tag_#{str(tag.id)}"/>
                                                        <t t-esc="tag.name"/>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <!-- / Target group info -->

                                <!-- Webinar info -->
                                <div class="panel panel-default" id="track-application-webinar-div">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Webinar info</h3>
                                    </div>

                                    <div class="panel-body">
                                        <p class="alert alert-info alert-dismissable">
                                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                            You can fill this if you want to hold a webinar before the actual event.
                                        </p>

                                        <div class="form-group" id="track-application-webinar-div">
                                            <div class="col-md-4">
                                                <label for="webinar" class="control-label">I wish to hold a webinar before the event</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-microphone"/></span>
                                                    <!-- This checkbox is presented as a selection for uniformitys sake -->
                                                    <select id="track-application-webinar-selection-field"
                                                            name="webinar"
                                                            class="form-control"
                                                            type="selection">
                                                        <option value="0">No</option>
                                                        <option value="1">Yes</option>
                                                    </select>
                                                </div>

                                            </div>
                                            <div class="col-md-8">
                                                <label for="webinar_info" class="control-label">Webinar info</label>

                                                <textarea class="form-control"
                                                          id="track-application-webinar-info-field"
                                                          name="webinar_info"
                                                          placeholder="Webinar info..."
                                                          rows="4" disabled="1"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- / Webinar info -->

                                <!-- Contact info -->
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Contact info</h3>
                                    </div>

                                    <div class="panel-body" id="track-application-contact-div">
                                        <p class="alert alert-info alert-dismissable">
                                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                            Please fill the contact persons information here.<br/>
                                            Any newsletters and other guidance will be sent to the contact person.
                                        </p>

                                        <div class="form-group" id="track-application-contact-info-div">
                                            <div class="col-md-4">
                                                <label for="partner_first_name" class="control-label">First name</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-user"/></span>
                                                    <input name="partner_first_name" placeholder="First Name" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="partner_first_name" class="control-label">Last name</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-user"/></span>
                                                    <input name="partner_last_name" placeholder="Last Name" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="email_from" class="control-label">Email</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-envelope"/></span>
                                                    <input name="email_from" placeholder="Email" class="form-control" type="email" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-contact-info-extra-div">
                                            <div class="col-md-4">
                                                <label for="organization" class="control-label">Organization</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-building"/></span>
                                                    <input name="organization" placeholder="Organization" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="function" class="control-label">Title</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-info"/></span>
                                                    <input name="function" placeholder="Title" class="form-control" type="text" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-contact-info-address-div">
                                            <div class="col-md-4">
                                                <label for="street" class="control-label">Street</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-road"/></span>
                                                    <input name="street" placeholder="Street" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="zip" class="control-label">Zip</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-map-marker"/></span>
                                                    <input name="zip" placeholder="Zip" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="city" class="control-label">City</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-map-marker"/></span>
                                                    <input name="city" placeholder="City" class="form-control" type="text" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-contact-info-div">
                                            <div class="col-md-4">
                                                <label for="phone" class="control-label">Phone</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-phone"/></span>
                                                    <input name="phone" placeholder="Phone" class="form-control" type="text" />
                                                </div>

                                                <label for="mobile" class="control-label">Mobile</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-mobile"/></span>
                                                    <input name="mobile" placeholder="Mobile" class="form-control" type="text" />
                                                </div>
                                            </div>
                                            <div class="col-md-8">
                                                <label for="biography" class="control-label">Speaker biography</label>

                                                <textarea class="form-control" name="biography" placeholder="Speaker biography..." rows="4"/>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-contact-extra-div">
                                            <div class="col-md-4">
                                                <label for="returning_speaker" class="control-label">
                                                    I have been a speaker in this event earlier
                                                </label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-bullhorn"/></span>
                                                    <select name="returning_speaker" class="form-control" type="selection">
                                                        <option value="0">No</option>
                                                        <option value="1">Yes</option>
                                                    </select>
                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                </div>
                                <!-- / Contact info -->

                                <!-- Speakers -->
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Speakers</h3>
                                    </div>

                                    <div class="panel-body" id="track-application-speakers-div">
                                        <p class="alert alert-info alert-dismissable">
                                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                            List all the speakers here
                                        </p>

                                        <div class="row" id="track-application-speakers-header-div">
                                            <label for="email" class="col-md-2">Email</label>
                                            <label for="partner_first_name" class="col-md-1">First name</label>
                                            <label for="partner_last_name" class="col-md-1">Last name</label>
                                            <label for="organization" class="col-md-2">Organization</label>
                                            <label for="function" class="col-md-2">Title</label>
                                            <label for="street" class="col-md-2">Street</label>
                                            <label for="zip" class="col-md-1">Zip</label>
                                            <label for="city" class="col-md-1">City</label>
                                        </div>

                                        <div id="track-application-speakers-input-div">
                                            <div class="row" id="track-application-speakers-input-row">
                                                <div class="col-md-2">
                                                    <input name="email" placeholder="Email" class="form-control" type="text" />
                                                </div>

                                                <div class="col-md-1">
                                                    <input name="partner_first_name" placeholder="First Name" class="form-control" type="text" />
                                                </div>

                                                <div class="col-md-1">
                                                    <input name="partner_last_name" placeholder="Last Name" class="form-control" type="text" />
                                                </div>

                                                <div class="col-md-2">
                                                    <input name="organization" placeholder="Organization" class="form-control" type="text" />
                                                </div>

                                                <div class="col-md-2">
                                                    <input name="function" placeholder="Title" class="form-control" type="text" />
                                                </div>

                                                <div class="col-md-2">
                                                    <input name="street" placeholder="Street" class="form-control" type="text" />
                                                </div>

                                                <div class="col-md-1">
                                                    <input name="zip" placeholder="Zip" class="form-control" type="text" />
                                                </div>

                                                <div class="col-md-1">
                                                    <input name="city" placeholder="City" class="form-control" type="text" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <button type="button" id="add_contact">Add a speaker</button>
                                        </div>
                                    </div>
                                </div>
                                <!-- / Speakers -->

                                <!-- Extra info -->
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Extra info</h3>
                                    </div>

                                    <div class="panel-body" id="track-application-extra-div">
                                        <p class="alert alert-info alert-dismissable">
                                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                            Any wishes about special arrangements concerning the premises, fitments, etc.
                                        </p>

                                        <div class="form-group" id="track-application-extra-info-div">
                                            <div class="col-md-12">
                                                <textarea class="form-control" name="extra_info"
                                                          placeholder="Extra info..."
                                                          rows="4"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- / Extra info -->

                                <div class="form-group">
                                    <div class="col-md-offset-3 col-sm-offset-4 col-sm-8 col-md-7">
                                        <button type="submit" class="btn btn-primary">Submit Proposal</button>
                                    </div>
                                </div>
                            </form>
                        </section>
                        <div class="oe_structure"/>
                    </div>
                </section>

            </div>
            <div class="oe_structure"/>
        </t>
    </template>

    <!-- Overwrites the agenda layout -->
    <template id="website_event_track.agenda">
        <t t-call="website_event.layout">
            <section class="container">
                <h1 class="text-center" t-field="event.name"/>
                <div class="form-inline pull-right">
                    <label class="invisible text-muted" id="search_summary"><span id="search_number">0</span> Found </label>
                    <input type="text" class="form-control" placeholder="Filter Tracks..." id="event_track_search"/>
                </div>
            </section>
            <t t-set="dayslist" t-value="days.keys()"/>
            <t t-set="dayslist2" t-value="dayslist.sort()"/> <!-- display days in the right order -->
            <section class="container" t-foreach="dayslist" t-as="day">
                <t t-set="locations" t-value="days[day]['locations']"/>
                <t t-set="dates" t-value="days[day]['dates']"/>
                <h3 class="page-header mt0">
                    <t t-esc="day"/>
                    <small><t t-esc="days_nbr[day]"/> talks</small>
                </h3>
                <table id="table_search" class="table table-bordered table-condensed">
                <tr>
                    <th/>
                    <t t-foreach="locations.keys()" t-as="location">
                        <th t-if="location" class="active">
                            <span t-esc="location and location.name or 'Unknown'"/>
                        </th>
                    </t>
                </tr>
                <tr t-foreach="dates" t-as="dt">
                    <td class="active">
                        <b t-esc="dt[0].strftime('%H:%M')"/>
                    </td>
                    <t t-if="dt[2]"> <!-- Not a multi location -->
                        <t t-foreach="locations" t-as="location">
                            <t t-if="location and dt[1].get(location, False)">
                                <t t-set="track" t-value="dt[1][location][0]"/>
                                <t t-if="track">
                                    <td t-att-rowspan="dt[1][location][3]" t-attf-class="event_color_#{track.color} #{track and 'event_track' or ''}">
                                        <t t-if="track">
                                            <a t-attf-href="/event/#{ slug(event) }/track/#{ slug(track) }">
                                                <span t-esc="track and track.name"/>
                                            </a>
                                            <div class="text-muted">
                                                <small t-esc="speakers[track.id]"/>
                                            </div>
                                        </t>
                                    </td>
                                </t>
                                <td t-if="not track" t-att-rowspan="dt[1][location][3]" class="event_track"/>
                            </t>
                        </t>
                    </t><t t-if="not dt[2]">
                        <t t-set="track" t-value="dt[1][False][0]"/>
                        <td t-att-colspan="len(locations)-1" t-attf-class="text-center event_color_#{track.color} #{track and 'event_track' or ''}">
                            <a t-attf-href="/event/#{ slug(event) }/track/#{ slug(track) }">
                                <span t-esc="track.name"/>
                            </a>
                            <div class="text-muted">
                                <small t-esc="speakers[track.id]"/>
                            </div>
                        </td>
                    </t>
                </tr>
                </table>
            </section>
        </t>
    </template>

</odoo>
