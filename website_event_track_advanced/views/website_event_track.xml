<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Overwrites the proposal layout -->
    <template name="Event track proposal" id="website_event_track.event_track_proposal">
        <t t-call="website_event.layout">
            <div class="oe_structure"/>
            <div class="container">
                <section>
                    <h1 class="text-center mb0">Call for Papers</h1>
                    <h2 class="text-center text-muted mb32" t-esc="event.name"></h2>
                </section>
                <section id="forms" t-if="not event.show_track_proposal">
                    <h1>Proposals are closed!</h1>
                    <p>
                        This event does not accept proposals.
                    </p>
                </section>
                <section class="row">
                    <div class="col-md-12">
                        <div class="oe_structure">
                            <section>
                                <h3 class="page-header mt16">
                                    Introduction
                                </h3>
                                <p>
                                    We will accept a broad range of
                                    presentations, from reports on academic and
                                    commercial projects to tutorials and case
                                    studies. As long as the presentation is
                                    interesting and potentially useful to the
                                    audience, it will be considered for
                                    inclusion in the programme.
                                </p>
                            </section>
                            <section>
                                <h3 class="page-header">Application</h3>
                                <p>
                                    Fill this form to propose your talk.

                                </p>
                            </section>
                        </div>
                        <section id="forms" t-if="event.show_track_proposal">
                            <form class="form-horizontal mt32 js_website_submit_form" t-attf-action="/event/#{event.id}/track_proposal/post" method="post" enctype="multipart/form-data">

                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                                <!-- Application info -->
                                <div class="panel panel-default" id="track-application-application-div">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Application info</h3>
                                    </div>

                                    <div class="panel-body">
                                        <div class="form-group" id="track-application-application-info-div">
                                            <div class="col-md-4">
                                                <label for="track_name" class="control-label">Application title</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-header"/></span>
                                                    <input name="track_name" placeholder="Application title" class="form-control" type="text" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-application-info-div">
                                            <div class="col-md-12">
                                                <label for="description" class="control-label">Application content</label>

                                                <textarea class="form-control" name="description" placeholder="Application content" rows="16"/>
                                            </div>
                                        </div>

                                        <div class="form-group" t-if="len(event.allowed_track_tag_ids)" id="track-application-application-tags-div">
                                            <div class="col-md-12">
                                                <label class="control-label">Tags</label>

                                                <div class="row">
                                                    <label class="col-sm-4" t-foreach="event.allowed_track_tag_ids" t-as="tag">
                                                        <input type="checkbox" value="1" t-attf-name="tag_#{str(tag.id)}"/>
                                                        <t t-esc="tag.name"/>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-application-attachment-div">
                                            <div class="col-md-12">
                                                <label for="attachment_ids" class="control-label">Attachment</label>
                                                <input name="attachment_ids" type="file" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- / Application info -->

                                <!-- Contact info -->
                                <div class="panel panel-default">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">Contact info</h3>
                                    </div>

                                    <div class="panel-body" id="track-application-contact-div">
                                        <div class="form-group" id="track-application-contact-info-div">
                                            <div class="col-md-4">
                                                <label for="partner_first_name" class="control-label">First name</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-user"/></span>
                                                    <input name="partner_first_name" placeholder="First Name" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="partner_first_name" class="control-label">Last name</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-user"/></span>
                                                    <input name="partner_last_name" placeholder="Last Name" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="email_from" class="control-label">Email</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-envelope"/></span>
                                                    <input name="email_from" placeholder="Email" class="form-control" type="email" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-contact-info-extra-div">
                                            <div class="col-md-4">
                                                <label for="organization" class="control-label">Organization</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-building"/></span>
                                                    <input name="organization" placeholder="Organization" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="function" class="control-label">Title</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-info"/></span>
                                                    <input name="function" placeholder="Title" class="form-control" type="text" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-contact-info-address-div">
                                            <div class="col-md-4">
                                                <label for="street" class="control-label">Street</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-road"/></span>
                                                    <input name="street" placeholder="Street" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="zip" class="control-label">Zip</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-map-marker"/></span>
                                                    <input name="zip" placeholder="Zip" class="form-control" type="text" />
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <label for="city" class="control-label">City</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-map-marker"/></span>
                                                    <input name="city" placeholder="City" class="form-control" type="text" />
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group" id="track-application-contact-info-div">
                                            <div class="col-md-4">
                                                <label for="phone" class="control-label">Phone</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-phone"/></span>
                                                    <input name="phone" placeholder="Phone" class="form-control" type="text" />
                                                </div>

                                                <label for="mobile" class="control-label">Mobile</label>

                                                <div class="input-group">
                                                    <span class="input-group-addon"><i class="fa fa-mobile"/></span>
                                                    <input name="mobile" placeholder="Mobile" class="form-control" type="text" />
                                                </div>
                                            </div>
                                            <div class="col-md-8">
                                                <label for="biography" class="control-label">Speaker biography</label>

                                                <textarea class="form-control" name="biography" placeholder="Speaker biography..." style="min-height: 120px"/>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <!-- / Contact info -->

                                <div class="form-group">
                                    <div class="col-md-offset-3 col-sm-offset-4 col-sm-8 col-md-7">
                                        <button type="submit" class="btn btn-primary">Submit Proposal</button>
                                    </div>
                                </div>
                            </form>
                        </section>
                        <div class="oe_structure"/>
                    </div>
                </section>

            </div>
            <div class="oe_structure"/>
        </t>
    </template>

    <!-- Overwrites the agenda layout -->
    <template id="website_event_track.agenda">
        <t t-call="website_event.layout">
            <section class="container">
                <h1 class="text-center" t-field="event.name"/>
                <div class="form-inline pull-right">
                    <label class="invisible text-muted" id="search_summary"><span id="search_number">0</span> Found </label>
                    <input type="text" class="form-control" placeholder="Filter Tracks..." id="event_track_search"/>
                </div>
            </section>
            <t t-set="dayslist" t-value="days.keys()"/>
            <t t-set="dayslist2" t-value="dayslist.sort()"/> <!-- display days in the right order -->
            <section class="container" t-foreach="dayslist" t-as="day">
                <t t-set="locations" t-value="days[day]['locations']"/>
                <t t-set="dates" t-value="days[day]['dates']"/>
                <h3 class="page-header mt0">
                    <t t-esc="day"/>
                    <small><t t-esc="days_nbr[day]"/> talks</small>
                </h3>
                <table id="table_search" class="table table-bordered table-condensed">
                <tr>
                    <th/>
                    <t t-foreach="locations.keys()" t-as="location">
                        <th t-if="location" class="active">
                            <span t-esc="location and location.name or 'Unknown'"/>
                        </th>
                    </t>
                </tr>
                <tr t-foreach="dates" t-as="dt">
                    <td class="active">
                        <b t-esc="dt[0].strftime('%H:%M')"/>
                    </td>
                    <t t-if="dt[2]"> <!-- Not a multi location -->
                        <t t-foreach="locations" t-as="location">
                            <t t-if="location and dt[1].get(location, False)">
                                <t t-set="track" t-value="dt[1][location][0]"/>
                                <t t-if="track">
                                    <td t-att-rowspan="dt[1][location][3]" t-attf-class="event_color_#{track.color} #{track and 'event_track' or ''}">
                                        <t t-if="track">
                                            <a t-attf-href="/event/#{ slug(event) }/track/#{ slug(track) }">
                                                <span t-esc="track and track.name"/>
                                            </a>
                                            <div class="text-muted">
                                                <small t-esc="speakers[track.id]"/>
                                            </div>
                                        </t>
                                    </td>
                                </t>
                                <td t-if="not track" t-att-rowspan="dt[1][location][3]" class="event_track"/>
                            </t>
                        </t>
                    </t><t t-if="not dt[2]">
                        <t t-set="track" t-value="dt[1][False][0]"/>
                        <td t-att-colspan="len(locations)-1" t-attf-class="text-center event_color_#{track.color} #{track and 'event_track' or ''}">
                            <a t-attf-href="/event/#{ slug(event) }/track/#{ slug(track) }">
                                <span t-esc="track.name"/>
                            </a>
                            <div class="text-muted">
                                <small t-esc="speakers[track.id]"/>
                            </div>
                        </td>
                    </t>
                </tr>
                </table>
            </section>
        </t>
    </template>

</odoo>
