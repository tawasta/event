<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- New the proposal layout -->
    <template name="Event track proposal" id="event_track_proposal">
        <t t-call="website_event.layout">

            <div class="oe_structure"/>
            <div class="container">
                <section id="call-for-papers-header" name="call-for-papers-header">
                    <h1 class="text-center mb0">Call for Papers</h1>
                    <h2 class="text-center text-muted mb32" t-esc="event.name"></h2>
                    <h4 class="text-center text-muted mb32" t-field="event.date_begin" t-field-options='{"format": "DD/MM/yyyy"}' ></h4>
                </section>

                <section name="call-for-papers-language" id="call-for-papers-language">
                    <t t-call="website.language_selector" />
                </section>

                <section id="forms" t-if="not event.show_track_proposal">
                    <h1>Proposals are closed!</h1>
                    <p>
                        This event does not accept proposals.
                    </p>
                </section>

                <t t-if="event.show_track_proposal">
                    <section class="row" id="track-application-section">
                        <div class="col-md-12">
                            <div class="oe_structure">
                                <section>
                                    <h3 class="page-header mt16">
                                        Presentation proposal
                                    </h3>
                                    <div id="track-application-section-alert-custom" class="alert">
                                        <t t-raw="event.event_description" />
                                    </div>
                                    <div id="track-application-section-alert" class="alert">

                                        <div class="track-application-section-alert-info-saving">You can save the presentation proposal as a draft or when it is completed.</div>
                                        <div class="track-application-section-alert-info-reminder mt16">A reminder email is sent to the contact person of a draft proposal to ensure that the proposal is submitted.</div>
                                        <div class="track-application-section-alert-info-permissions mt16">Only the contact person of the presentation can submit the completed proposal.</div>
                                        <div class="track-application-section-alert-info-video mt16">The proposal can also be submitted as a video. In this case, please include a short description as well as a link to the video.</div>
                                    </div>

                                    <p class="alert text-primary">The required fields are marked with *</p>
                                </section>

                                <section id="forms">
                                    <form id="track-application-form"
                                          class="form-horizontal mt32 js_website_submit_form"
                                          t-attf-action="/event/#{event.id}/track_proposal/post"
                                          method="post"
                                          enctype="multipart/form-data">

                                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token(time_limit=False)"/>

                                        <t t-call="website_event_track_advanced.event_track_application"/>


                                        <p class="alert alert-info alert-dismissable text-center" id="alert-info-save-as-draft">
                                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                            <span>By clicking <strong>"Save as draft"</strong> the proposal shall be saved and can be edited later.</span>
                                        </p>

                                        <p class="alert alert-info alert-dismissable text-center" id="alert-info-save-and-send">
                                            <a href="#" class="close" data-dismiss="alert" aria-label="close">&#215;</a>
                                            <span>By clicking <strong>"Save and submit"</strong> the proposal shall be saved and submitted for review.</span><br />
                                            <span>Please note that a completed proposal can no longer be edited.</span>
                                        </p>
                                        <div class="form-group">
                                            <div class="col-xs-12 mt16">
                                                <label for="privacy_acceptance">
                                                    <input type="checkbox" name="privacy_acceptance" id="privacy_acceptance"/> I accept the privacy policy for this website.
                                                </label>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <button type="submit"
                                                   name="track-save"
                                                   value="track-save"
                                                   id="application-submit-button"
                                                   class="application-submit-button btn btn-primary col-xs-10 col-xs-offset-1">Save as draft
                                            </button>

                                            <button t-if="track.state in ['draft', ''] or not track.state"
                                                   type="submit"
                                                   name="track-confirm"
                                                   value="track-confirm"
                                                   id="application-submit-button-send"
                                                   class="application-submit-button btn btn-primary col-xs-10 col-xs-offset-1 mt8">Save and submit
                                            </button>
                                        </div>
                                    </form>
                                </section>
                            </div>
                        </div>
                    </section>
                </t>

            </div>
            <div class="oe_structure"/>
            <script type="text/javascript" src="/website_event_track_advanced/static/src/js/acceptance.js?v100"></script>
        </t>
    </template>

</odoo>
