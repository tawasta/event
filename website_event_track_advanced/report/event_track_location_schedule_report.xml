<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <template id="event_track_location_schedule_report">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="doc">
                <div id="wrap" class="page">
                    <style type="text/css">
table {
    border-collapse: collapse;
}
th {
    padding-top: 2em;
}
td {
    border: 1px dotted #555;
    padding: 1em 2em;
    white-space: nowrap;
}
                    </style>
                    <div class="oe_structure" />
                    <h1 t-field="doc.name" />
                    <table name="track_schedule_table" class="table table-condensed">
                        <t t-set="date" t-value="false" />
                        <tbody>
                            <t
                                t-foreach="doc.scheduled_track_ids.filtered(lambda track: track.date.date() >= datetime.date.today())"
                                t-as="track"
                            >
                                <t
                                    t-if="track.date"
                                    t-set="current"
                                    t-value="track.date.date()"
                                />

                                <t t-if="not date or current != date">
                                    <tr>
                                        <t
                                            t-if="track.date"
                                            t-set="date"
                                            t-value="track.date.date()"
                                        />
                                        <th colspan="2">
                                            <h2>Program <span
                                                    t-field="track.date"
                                                    t-options='{"format": "dd.MM.YYYY"}'
                                                /></h2>
                                        </th>
                                    </tr>
                                </t>
                                <t t-if="track.type.attendable">
                                    <tr>
                                        <td>
                                            <span
                                                t-field="track.date"
                                                t-options='{"format": "HH:mm"}'
                                            /> - <span
                                                t-field="track.date_end"
                                                t-options='{"format": "HH:mm"}'
                                            />
                                        </td>
                                        <td><span t-field="track.name" /></td>
                                    </tr>
                                </t>
                            </t>
                        </tbody>
                    </table>
                </div>
            </t>
        </t>
    </template>
</odoo>
