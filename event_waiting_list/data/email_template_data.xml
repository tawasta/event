<?xml version="1.0"?>
<odoo>
    <data noupdate="0">
        <!-- Email when placed on a waiting list -->
        <record id="event_waiting" model="mail.template">
            <field name="name">Event: Waiting List</field>
            <field name="model_id" ref="event.model_event_registration"/>
            <field name="subject">You're on a waiting list for ${object.event_id.name}</field>
            <field name="email_from">${(object.event_id.organizer_id.email_formatted or object.event_id.user_id.email_formatted or '') | safe}</field>
            <field name="email_to">${(object.email and '"%s" &lt;%s&gt;' % (object.name, object.email) or object.partner_id.email_formatted or '') | safe}</field>
            <field name="body_html" type="html">
                <div>
                    Dear ${object.name},<br/>
                    Thank you for your inquiry.<br/>
                    The event: ${object.event_id.name}, is currently sold out.<br/>
                    You have been placed on a waiting list. We will contact you if any tickets are available.
                    If you have any questions, please let us know.
                    <br/><br/>
                    Thank you,
                    % if object.event_id.user_id.signature:
                    <br/>
                    ${object.event_id.user_id.signature | safe}
                    % endif
                </div>
            </field>
        </record>
        <!-- Email when placed on a waiting list -->
        <record id="event_confirm_waiting_registration" model="mail.template">
            <field name="name">Event: Confirm Waiting List Registration</field>
            <field name="model_id" ref="event.model_event_registration"/>
            <field name="subject">We have more tickets available for ${object.event_id.name}</field>
            <field name="email_from">${(object.event_id.organizer_id.email_formatted or object.event_id.user_id.email_formatted or '') | safe}</field>
            <field name="email_to">${(object.email and '"%s" &lt;%s&gt;' % (object.name, object.email) or object.partner_id.email_formatted or '') | safe}</field>
            <field name="body_html" type="html">
                <div>
                    Dear ${object.name},<br/>
                    We have more seats available for: ${object.event_id.name}.<br/>
                    Claim your spot quickly as we give seats on a first come first serve basis.<br/>
                    Claim or cancel here: 
                    <a href="${object.confirm_url}"/><br/>
                        <div style="margin: 16px 0px 16px 0px;"><a href="${object.confirm_url}" style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;">
                            Claim your spot
                        </a></div>
                    <br/><br/>
                    Thank you,
                    % if object.event_id.user_id.signature:
                    <br/>
                    ${object.event_id.user_id.signature | safe}
                    % endif
                </div>
            </field>
        </record>
        <!-- Email to register for an event from a waiting list -->
        <record id="event_waiting_registration" model="mail.template">
            <field name="name">Event: Waiting List Registration</field>
            <field name="model_id" ref="event.model_event_registration"/>
            <field name="email_from">${(object.event_id.organizer_id.email_formatted or object.event_id.user_id.email_formatted or '') | safe}</field>
            <field name="body_html" type="html">
                <div><strong>Dear ${ctx.get('name')}</strong>,<br/>
                    We have more tickets available for: ${ctx.get('event')}.<br/>
                    Claim your spot from the following link: <a href="${ctx.get('confirm_url')}"/><br/>
                    <div style="margin: 16px 0px 16px 0px;"><a href="${ctx.get('confirm_url')}" style="background-color: #875A7B; padding: 8px 16px 8px 16px; text-decoration: none; color: #fff; border-radius: 5px; font-size:13px;">
                            Claim your spot
                        </a></div>
                </div>
            </field>
        </record>
    </data>
</odoo>
