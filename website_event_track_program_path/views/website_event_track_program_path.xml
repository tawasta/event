<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="website_event_track_program_path.agenda_track_td_content"
              inherit_id="website_event_track_advanced.agenda_track_td_content">
        <a name="event-track-link" position="before">
            <div t-if="track.type.attendable"
                 name="event-track-program-path"
                 class="event-track-program-path pull-right">

                <!-- TODO: disable stars if not logged in -->
                <span class="fa fa-star-o fa-2x track-program-path-icon"
                      id="track-program-path-icon-disabled"
                      title="Add to personal program"
                      data-placement="bottom"
                      data-toggle="tooltip"
                      t-att-style="'display: none;' if program.track_ids and track.id in program.track_ids.ids else False"
                />

                <span class="fa fa-star fa-2x track-program-path-icon"
                      id="track-program-path-icon-enabled"
                      title="Remove from personal program"
                      data-placement="bottom"
                      data-toggle="tooltip"
                      t-att-style="False if program.track_ids and track.id in program.track_ids.ids else 'display: none;'"
                />
            </div>
        </a>
    </template>

    <template id="website_event_track_program_path.agenda" inherit_id="website_event_track_advanced.agenda">
        <xpath expr="//a[@id='target-groups-collapse-button']" position="after">
            <a t-if="program.track_ids"
               class="btn btn-default"
               t-attf-href="/event/#{slug(event)}/agenda/#{slug(program)}">My program path</a>
        </xpath>

        <xpath expr="//script" position="after">
            <script type="text/javascript" src="/website_event_track_program_path/static/src/js/agenda.js?v100"></script>
        </xpath>
    </template>

</odoo>
